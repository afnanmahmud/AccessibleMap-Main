{"ast":null,"code":"var _jsxFileName = \"/Users/kenn/Documents/GitHub/AccessibleMapBackup/src/components/AccessibleMap.tsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport TileLayer from 'ol/layer/Tile';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport OSM from 'ol/source/OSM';\nimport XYZ from 'ol/source/XYZ';\nimport Feature from 'ol/Feature';\nimport Point from 'ol/geom/Point';\nimport LineString from 'ol/geom/LineString';\nimport { fromLonLat } from 'ol/proj';\nimport { Icon, Style, Stroke } from 'ol/style';\nimport { defaults as defaultControls } from 'ol/control';\nimport Openrouteservice from 'openrouteservice-js';\nimport MapSearch from './MapSearch/MapSearch';\nimport campusLocations from './data/campusLocations.json';\nimport 'ol/ol.css';\nimport './AccessibleMap.css';\n\n// OpenRouteService API configuration\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst orsDirections = new Openrouteservice.Directions({\n  api_key: '5b3ce3597851110001cf6248a1d686e75cef4e86a9782464ccdb71cf'\n});\n\n// Types\n\n// Constants\nconst INITIAL_CENTER = fromLonLat([-84.5831, 34.0390]);\nconst AccessibleMap = ({\n  className\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const vectorSourceRef = useRef(new VectorSource());\n  const userMarkerRef = useRef(new Feature());\n  const [viewMode, setViewMode] = useState('standard');\n  const [startLocation, setStartLocation] = useState('');\n  const [endLocation, setEndLocation] = useState('');\n  const [routeMode, setRouteMode] = useState('walking');\n  const [userLocation, setUserLocation] = useState(null);\n  const [turnByTurnDirections, setTurnByTurnDirections] = useState([]);\n  const [isFlyoutOpen, setIsFlyoutOpen] = useState(false);\n  const [routeOptions, setRouteOptions] = useState([]);\n  const [selectedRouteId, setSelectedRouteId] = useState(null);\n\n  // Place accessibility markers on the map\n  const placeMarkers = useCallback(() => {\n    campusLocations.forEach(location => {\n      const coords = fromLonLat(location.coordinates);\n      const marker = new Feature(new Point(coords));\n      marker.setStyle(new Style({\n        image: new Icon({\n          src: 'https://cdn2.iconfinder.com/data/icons/wsd-map-markers-2/512/wsd_markers_97-512.png',\n          scale: 0.04,\n          anchor: [0.5, 1]\n        })\n      }));\n      vectorSourceRef.current.addFeature(marker);\n    });\n  }, []);\n\n  // Start tracking user location\n  const startTracking = useCallback(() => {\n    if (!navigator.geolocation) {\n      console.error('Geolocation is not supported by this browser.');\n      return;\n    }\n    const watchId = navigator.geolocation.watchPosition(position => {\n      const {\n        latitude,\n        longitude\n      } = position.coords;\n      const lonLat = [longitude, latitude];\n      setUserLocation(lonLat);\n      const coords = fromLonLat(lonLat);\n\n      // Update marker position\n      userMarkerRef.current.setGeometry(new Point(coords));\n\n      // Ensure the marker is added only once\n      if (!vectorSourceRef.current.hasFeature(userMarkerRef.current)) {\n        userMarkerRef.current.setStyle(new Style({\n          image: new Icon({\n            src: 'https://cdn-icons-png.flaticon.com/128/884/884094.png',\n            scale: 0.2\n          })\n        }));\n        vectorSourceRef.current.addFeature(userMarkerRef.current);\n      }\n\n      // Follow user location\n      if (mapInstance.current) {\n        mapInstance.current.getView().setCenter(coords);\n      }\n    }, error => {\n      console.error('Error getting location:', error);\n    }, {\n      enableHighAccuracy: true,\n      maximumAge: 0,\n      timeout: 5000\n    });\n    return () => navigator.geolocation.clearWatch(watchId);\n  }, []);\n\n  // Initialize the map\n  useEffect(() => {\n    if (!mapRef.current) return;\n    const vectorLayer = new VectorLayer({\n      source: vectorSourceRef.current\n    });\n    const standardLayer = new TileLayer({\n      source: new OSM(),\n      visible: true\n    });\n    const satelliteLayer = new TileLayer({\n      source: new XYZ({\n        url: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',\n        maxZoom: 19\n      }),\n      visible: false\n    });\n    mapInstance.current = new Map({\n      target: mapRef.current,\n      layers: [standardLayer, satelliteLayer, vectorLayer],\n      view: new View({\n        center: INITIAL_CENTER,\n        zoom: 17,\n        maxZoom: 19\n      }),\n      controls: defaultControls()\n    });\n    placeMarkers();\n    return () => {\n      if (mapInstance.current) {\n        mapInstance.current.setTarget(undefined);\n      }\n    };\n  }, [placeMarkers, startTracking]);\n\n  // Toggle between standard and satellite map views\n  const toggleMapView = useCallback(() => {\n    if (!mapInstance.current) return;\n    const layers = mapInstance.current.getLayers().getArray();\n    const standardLayer = layers[0];\n    const satelliteLayer = layers[1];\n    if (viewMode === 'standard') {\n      standardLayer.setVisible(false);\n      satelliteLayer.setVisible(true);\n      setViewMode('satellite');\n    } else {\n      standardLayer.setVisible(true);\n      satelliteLayer.setVisible(false);\n      setViewMode('standard');\n    }\n  }, [viewMode]);\n\n  // Toggle between walking and wheelchair route modes\n  const toggleRouteMode = useCallback(() => {\n    setRouteMode(routeMode === 'walking' ? 'wheelchair' : 'walking');\n  }, [routeMode]);\n\n  // Find location coordinates by name\n  const findLocationByName = useCallback(query => {\n    if (!query) return null;\n    const lowerQuery = query.toLowerCase();\n\n    // Try exact match first\n    const exactMatch = campusLocations.find(loc => loc.name.toLowerCase() === lowerQuery);\n    if (exactMatch) return exactMatch.coordinates;\n\n    // Try partial match\n    const partialMatch = campusLocations.find(loc => loc.name.toLowerCase().includes(lowerQuery));\n    return partialMatch ? partialMatch.coordinates : null;\n  }, []);\n\n  // Clear previous routes from the map\n  const clearRoutes = useCallback(() => {\n    const features = vectorSourceRef.current.getFeatures();\n    features.forEach(feature => {\n      // Remove only route lines and previous start/end markers\n      if (feature.getGeometry() instanceof LineString || feature.get('type') === 'marker') {\n        vectorSourceRef.current.removeFeature(feature);\n      }\n    });\n    setTurnByTurnDirections([]);\n  }, []);\n\n  // Calculate route options when start and end locations are set\n  useEffect(() => {\n    if (!startLocation || !endLocation) {\n      setIsFlyoutOpen(false);\n      setRouteOptions([]);\n      return;\n    }\n    const timer = setTimeout(() => {\n      let startCoords;\n      if (startLocation) {\n        // If user entered a start location, use that\n        startCoords = findLocationByName(startLocation);\n      } else if (userLocation) {\n        // If no start location entered, use current user location\n        startCoords = userLocation;\n      } else {\n        return;\n      }\n      const endCoords = findLocationByName(endLocation);\n      if (!startCoords || !endCoords) {\n        setIsFlyoutOpen(false);\n        setRouteOptions([]);\n        return;\n      }\n\n      // Calculate routes\n      orsDirections.calculate({\n        coordinates: [startCoords, endCoords],\n        profile: routeMode === 'wheelchair' ? 'wheelchair' : 'foot-walking',\n        format: 'geojson',\n        alternative_routes: {\n          target_count: 3,\n          share_factor: 0.6\n        },\n        instructions: true\n      }).then(response => {\n        const routes = response.features.map((feature, index) => ({\n          id: index,\n          summary: `Route ${index + 1}`,\n          distance: feature.properties.summary.distance,\n          duration: feature.properties.summary.duration,\n          coordinates: feature.geometry.coordinates,\n          steps: feature.properties.segments[0].steps\n        }));\n        setRouteOptions(routes);\n        setIsFlyoutOpen(true);\n        setSelectedRouteId(0); // Default to first route\n      }).catch(err => {\n        console.error('Route calculation error:', err);\n        setIsFlyoutOpen(false);\n        setRouteOptions([]);\n      });\n    }, 500); // 500ms debounce\n\n    return () => clearTimeout(timer);\n  }, [startLocation, endLocation, routeMode, findLocationByName, userLocation]);\n\n  // Calculate and display the selected route\n  const calculateRoute = useCallback(() => {\n    if (selectedRouteId === null || !routeOptions.length) {\n      alert('Please select a route to start.');\n      return;\n    }\n    clearRoutes();\n    let startCoords;\n    if (startLocation) {\n      // If user entered a start location, use that\n      startCoords = findLocationByName(startLocation);\n    } else if (userLocation) {\n      // If no start location entered, use current user location\n      startCoords = userLocation;\n    } else {\n      alert('Unable to determine your current location. Please enter a start location.');\n      return;\n    }\n    const endCoords = findLocationByName(endLocation);\n    if (!startCoords || !endCoords) {\n      alert('Please enter valid locations');\n      return;\n    }\n\n    // Convert coordinates to OpenLayers format\n    const startPoint = fromLonLat(startCoords);\n    const endPoint = fromLonLat(endCoords);\n\n    // Create start marker (blue)\n    const startMarker = new Feature(new Point(startPoint));\n    startMarker.setStyle(new Style({\n      image: new Icon({\n        src: 'https://cdn-icons-png.flaticon.com/128/7976/7976202.png',\n        scale: 0.2,\n        anchor: [0.5, 1]\n      })\n    }));\n    startMarker.set('type', 'marker');\n\n    // Create end marker (red)\n    const endMarker = new Feature(new Point(endPoint));\n    endMarker.setStyle(new Style({\n      image: new Icon({\n        src: 'https://cdn-icons-png.flaticon.com/128/9131/9131546.png',\n        scale: 0.2,\n        anchor: [0.5, 1]\n      })\n    }));\n    endMarker.set('type', 'marker');\n\n    // Add markers to the vector source\n    vectorSourceRef.current.addFeature(startMarker);\n    vectorSourceRef.current.addFeature(endMarker);\n\n    // Zoom to fit both markers\n    if (mapInstance.current) {\n      const extent = [Math.min(startPoint[0], endPoint[0]),\n      // Min Longitude\n      Math.min(startPoint[1], endPoint[1]),\n      // Min Latitude\n      Math.max(startPoint[0], endPoint[0]),\n      // Max Longitude\n      Math.max(startPoint[1], endPoint[1]) // Max Latitude\n      ];\n      mapInstance.current.getView().fit(extent, {\n        padding: [50, 50, 50, 50],\n        duration: 1000,\n        maxZoom: 18\n      });\n    }\n\n    // Display the selected route\n    const selectedRoute = routeOptions.find(route => route.id === selectedRouteId);\n    if (selectedRoute) {\n      const routeFeature = new Feature({\n        geometry: new LineString(selectedRoute.coordinates.map(coord => fromLonLat(coord)))\n      });\n      routeFeature.setStyle(new Style({\n        stroke: new Stroke({\n          color: routeMode === 'wheelchair' ? '#4287f5' : '#2563eb',\n          width: 4,\n          lineDash: routeMode === 'wheelchair' ? [5, 5] : undefined\n        })\n      }));\n      vectorSourceRef.current.addFeature(routeFeature);\n\n      // Set turn-by-turn directions\n      if (selectedRoute.steps) {\n        const directions = selectedRoute.steps.map(step => ({\n          type: step.type,\n          instruction: step.instruction,\n          distance: step.distance,\n          duration: step.duration\n        }));\n        setTurnByTurnDirections(directions);\n      }\n    }\n\n    // Close the flyout\n    setIsFlyoutOpen(false);\n  }, [startLocation, endLocation, selectedRouteId, routeOptions, clearRoutes, findLocationByName, userLocation, routeMode]);\n\n  // Handle changing locations\n  const handleStartLocationChange = useCallback(value => {\n    setStartLocation(value);\n  }, []);\n  const handleEndLocationChange = useCallback(value => {\n    setEndLocation(value);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-container\",\n          children: [/*#__PURE__*/_jsxDEV(MapSearch, {\n            onStartChange: handleStartLocationChange,\n            onEndChange: handleEndLocationChange,\n            onSubmit: calculateRoute,\n            locations: campusLocations\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"route-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: calculateRoute,\n              className: \"find-route-button\",\n              \"aria-label\": \"Find route\",\n              children: \"GO\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: toggleRouteMode,\n              className: `route-mode-toggle ${routeMode === 'wheelchair' ? 'wheelchair-active' : ''}`,\n              \"aria-label\": `Switch to ${routeMode === 'wheelchair' ? 'standard walking' : 'wheelchair'} route`,\n              children: routeMode === 'wheelchair' ? ' 🦽 Wheelchair' : ' 🚶 Walking'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"map-content\",\n        children: [isFlyoutOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"route-flyout\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Route Options\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 15\n          }, this), routeOptions.map(route => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `route-option ${selectedRouteId === route.id ? 'selected' : ''}`,\n            onClick: () => setSelectedRouteId(route.id),\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: route.summary\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Distance: \", (route.distance / 1000).toFixed(2), \" km\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Duration: \", Math.round(route.duration / 60), \" minutes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 19\n            }, this)]\n          }, route.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: calculateRoute,\n            className: \"select-route-button\",\n            \"aria-label\": \"Select this route\",\n            children: \"Use Selected Route\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `map-root ${className || ''} ${isFlyoutOpen ? 'shifted' : ''}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            ref: mapRef,\n            className: \"map-container\",\n            role: \"application\",\n            \"aria-label\": \"Interactive map displaying user location and navigation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"map-controls\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: toggleMapView,\n              className: \"map-toggle-button\",\n              children: viewMode === 'standard' ? 'Satellite View' : 'Standard View'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, this), turnByTurnDirections.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"turn-by-turn-directions\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Turn-by-Turn Directions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: turnByTurnDirections.map((direction, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [direction.instruction, /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"direction-details\",\n              children: [\"(Distance: \", (direction.distance / 1).toFixed(1), \" m, Duration: \", (direction.duration / 60).toFixed(1), \" min)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 420,\n    columnNumber: 5\n  }, this);\n};\n_s(AccessibleMap, \"AY4xd09G57nMpWu3wbQqhUfp5hI=\");\n_c = AccessibleMap;\nexport default AccessibleMap;\nvar _c;\n$RefreshReg$(_c, \"AccessibleMap\");","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useState","Map","View","TileLayer","VectorLayer","VectorSource","OSM","XYZ","Feature","Point","LineString","fromLonLat","Icon","Style","Stroke","defaults","defaultControls","Openrouteservice","MapSearch","campusLocations","jsxDEV","_jsxDEV","orsDirections","Directions","api_key","INITIAL_CENTER","AccessibleMap","className","_s","mapRef","mapInstance","vectorSourceRef","userMarkerRef","viewMode","setViewMode","startLocation","setStartLocation","endLocation","setEndLocation","routeMode","setRouteMode","userLocation","setUserLocation","turnByTurnDirections","setTurnByTurnDirections","isFlyoutOpen","setIsFlyoutOpen","routeOptions","setRouteOptions","selectedRouteId","setSelectedRouteId","placeMarkers","forEach","location","coords","coordinates","marker","setStyle","image","src","scale","anchor","current","addFeature","startTracking","navigator","geolocation","console","error","watchId","watchPosition","position","latitude","longitude","lonLat","setGeometry","hasFeature","getView","setCenter","enableHighAccuracy","maximumAge","timeout","clearWatch","vectorLayer","source","standardLayer","visible","satelliteLayer","url","maxZoom","target","layers","view","center","zoom","controls","setTarget","undefined","toggleMapView","getLayers","getArray","setVisible","toggleRouteMode","findLocationByName","query","lowerQuery","toLowerCase","exactMatch","find","loc","name","partialMatch","includes","clearRoutes","features","getFeatures","feature","getGeometry","get","removeFeature","timer","setTimeout","startCoords","endCoords","calculate","profile","format","alternative_routes","target_count","share_factor","instructions","then","response","routes","map","index","id","summary","distance","properties","duration","geometry","steps","segments","catch","err","clearTimeout","calculateRoute","length","alert","startPoint","endPoint","startMarker","set","endMarker","extent","Math","min","max","fit","padding","selectedRoute","route","routeFeature","coord","stroke","color","width","lineDash","directions","step","type","instruction","handleStartLocationChange","value","handleEndLocationChange","children","onStartChange","onEndChange","onSubmit","locations","fileName","_jsxFileName","lineNumber","columnNumber","onClick","toFixed","round","ref","role","direction","_c","$RefreshReg$"],"sources":["/Users/kenn/Documents/GitHub/AccessibleMapBackup/src/components/AccessibleMap.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport TileLayer from 'ol/layer/Tile';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport OSM from 'ol/source/OSM';\nimport XYZ from 'ol/source/XYZ';\nimport Feature from 'ol/Feature';\nimport Point from 'ol/geom/Point';\nimport LineString from 'ol/geom/LineString';\nimport { fromLonLat } from 'ol/proj';\nimport { Icon, Style, Stroke } from 'ol/style';\nimport { defaults as defaultControls } from 'ol/control';\nimport Openrouteservice from 'openrouteservice-js';\nimport MapSearch from './MapSearch/MapSearch';\nimport campusLocations from './data/campusLocations.json';\nimport 'ol/ol.css';\nimport './AccessibleMap.css';\n\n// OpenRouteService API configuration\nconst orsDirections = new Openrouteservice.Directions({\n  api_key: '5b3ce3597851110001cf6248a1d686e75cef4e86a9782464ccdb71cf',\n});\n\n// Types\nexport interface AccessibleMapProps {\n  className?: string;\n}\n\nexport interface Location {\n  name: string;\n  coordinates: [number, number];\n}\n\ninterface TurnByTurnDirection {\n  type: string;\n  instruction: string;\n  distance: number;\n  duration: number;\n}\n\ninterface RouteOption {\n  steps: any;\n  id: number;\n  summary: string;\n  distance: number; // in meters\n  duration: number; // in seconds\n  coordinates: number[][];\n}\n\n// Constants\nconst INITIAL_CENTER = fromLonLat([-84.5831, 34.0390]);\n\nconst AccessibleMap: React.FC<AccessibleMapProps> = ({ className }) => {\n  const mapRef = useRef<HTMLDivElement | null>(null);\n  const mapInstance = useRef<Map | null>(null);\n  const vectorSourceRef = useRef(new VectorSource());\n  const userMarkerRef = useRef(new Feature());\n  \n  const [viewMode, setViewMode] = useState<'standard' | 'satellite'>('standard');\n  const [startLocation, setStartLocation] = useState('');\n  const [endLocation, setEndLocation] = useState('');\n  const [routeMode, setRouteMode] = useState<'walking' | 'wheelchair'>('walking');\n  const [userLocation, setUserLocation] = useState<number[] | null>(null);\n  const [turnByTurnDirections, setTurnByTurnDirections] = useState<TurnByTurnDirection[]>([]);\n  const [isFlyoutOpen, setIsFlyoutOpen] = useState(false);\n  const [routeOptions, setRouteOptions] = useState<RouteOption[]>([]);\n  const [selectedRouteId, setSelectedRouteId] = useState<number | null>(null);\n\n  // Place accessibility markers on the map\n  const placeMarkers = useCallback(() => {\n    campusLocations.forEach((location) => {\n      const coords = fromLonLat(location.coordinates);\n      const marker = new Feature(new Point(coords));\n\n      marker.setStyle(\n        new Style({\n          image: new Icon({\n            src: 'https://cdn2.iconfinder.com/data/icons/wsd-map-markers-2/512/wsd_markers_97-512.png',\n            scale: 0.04,\n            anchor: [0.5, 1],\n          }),\n        })\n      );\n\n      vectorSourceRef.current.addFeature(marker);\n    });\n  }, []);\n\n  // Start tracking user location\n  const startTracking = useCallback(() => {\n    if (!navigator.geolocation) {\n      console.error('Geolocation is not supported by this browser.');\n      return;\n    }\n\n    const watchId = navigator.geolocation.watchPosition(\n      (position) => {\n        const { latitude, longitude } = position.coords;\n        const lonLat = [longitude, latitude];\n        setUserLocation(lonLat as [number, number]);\n        \n        const coords = fromLonLat(lonLat);\n  \n        // Update marker position\n        userMarkerRef.current.setGeometry(new Point(coords));\n  \n        // Ensure the marker is added only once\n        if (!vectorSourceRef.current.hasFeature(userMarkerRef.current)) {\n          userMarkerRef.current.setStyle(\n            new Style({\n              image: new Icon({\n                src: 'https://cdn-icons-png.flaticon.com/128/884/884094.png',\n                scale: 0.2,\n              }),\n            })\n          );\n          vectorSourceRef.current.addFeature(userMarkerRef.current);\n        }\n  \n        // Follow user location\n        if (mapInstance.current) {\n          mapInstance.current.getView().setCenter(coords);\n        }\n      },\n      (error) => {\n        console.error('Error getting location:', error);\n      },\n      { enableHighAccuracy: true, maximumAge: 0, timeout: 5000 }\n    );\n\n    return () => navigator.geolocation.clearWatch(watchId);\n  }, []);\n\n  // Initialize the map\n  useEffect(() => {\n    if (!mapRef.current) return;\n\n    const vectorLayer = new VectorLayer({ \n      source: vectorSourceRef.current \n    });\n\n    const standardLayer = new TileLayer({ \n      source: new OSM(), \n      visible: true \n    });\n\n    const satelliteLayer = new TileLayer({\n      source: new XYZ({\n        url: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',\n        maxZoom: 19,\n      }),\n      visible: false,\n    });\n\n    mapInstance.current = new Map({\n      target: mapRef.current,\n      layers: [standardLayer, satelliteLayer, vectorLayer],\n      view: new View({\n        center: INITIAL_CENTER,\n        zoom: 17,\n        maxZoom: 19,\n      }),\n      controls: defaultControls(),\n    });\n    \n    placeMarkers();\n\n    return () => {\n      if (mapInstance.current) {\n        mapInstance.current.setTarget(undefined);\n      }\n    };\n  }, [placeMarkers, startTracking]);\n\n  // Toggle between standard and satellite map views\n  const toggleMapView = useCallback(() => {\n    if (!mapInstance.current) return;\n\n    const layers = mapInstance.current.getLayers().getArray();\n    const standardLayer = layers[0];\n    const satelliteLayer = layers[1];\n\n    if (viewMode === 'standard') {\n      standardLayer.setVisible(false);\n      satelliteLayer.setVisible(true);\n      setViewMode('satellite');\n    } else {\n      standardLayer.setVisible(true);\n      satelliteLayer.setVisible(false);\n      setViewMode('standard');\n    }\n  }, [viewMode]);\n\n  // Toggle between walking and wheelchair route modes\n  const toggleRouteMode = useCallback(() => {\n    setRouteMode(routeMode === 'walking' ? 'wheelchair' : 'walking');\n  }, [routeMode]);\n\n  // Find location coordinates by name\n  const findLocationByName = useCallback((query: string): number[] | null => {\n    if (!query) return null;\n    \n    const lowerQuery = query.toLowerCase();\n    \n    // Try exact match first\n    const exactMatch = campusLocations.find(loc => \n      loc.name.toLowerCase() === lowerQuery\n    );\n    \n    if (exactMatch) return exactMatch.coordinates;\n    \n    // Try partial match\n    const partialMatch = campusLocations.find(loc => \n      loc.name.toLowerCase().includes(lowerQuery)\n    );\n    \n    return partialMatch ? partialMatch.coordinates : null;\n  }, []);\n\n  // Clear previous routes from the map\n  const clearRoutes = useCallback(() => {\n    const features = vectorSourceRef.current.getFeatures();\n    features.forEach(feature => {\n      // Remove only route lines and previous start/end markers\n      if (feature.getGeometry() instanceof LineString || feature.get('type') === 'marker') {\n        vectorSourceRef.current.removeFeature(feature);\n      }\n    });\n    setTurnByTurnDirections([]);\n  }, []);\n\n  // Calculate route options when start and end locations are set\n  useEffect(() => {\n    if (!startLocation || !endLocation) {\n      setIsFlyoutOpen(false);\n      setRouteOptions([]);\n      return;\n    }\n\n    const timer = setTimeout(() => {\n      let startCoords;\n      if (startLocation) {\n        // If user entered a start location, use that\n        startCoords = findLocationByName(startLocation);\n      } else if (userLocation) {\n        // If no start location entered, use current user location\n        startCoords = userLocation;\n      } else {\n        return;\n      }\n\n      const endCoords = findLocationByName(endLocation);\n\n      if (!startCoords || !endCoords) {\n        setIsFlyoutOpen(false);\n        setRouteOptions([]);\n        return;\n      }\n\n      // Calculate routes\n      orsDirections\n        .calculate({\n          coordinates: [startCoords, endCoords],\n          profile: routeMode === 'wheelchair' ? 'wheelchair' : 'foot-walking',\n          format: 'geojson',\n          alternative_routes: { target_count: 3, share_factor: 0.6 },\n          instructions: true\n        })\n        .then((response: any) => {\n          const routes = response.features.map((feature: any, index: number) => ({\n            id: index,\n            summary: `Route ${index + 1}`,\n            distance: feature.properties.summary.distance,\n            duration: feature.properties.summary.duration,\n            coordinates: feature.geometry.coordinates,\n            steps: feature.properties.segments[0].steps\n          }));\n          setRouteOptions(routes);\n          setIsFlyoutOpen(true);\n          setSelectedRouteId(0); // Default to first route\n        })\n        .catch((err: Error) => {\n          console.error('Route calculation error:', err);\n          setIsFlyoutOpen(false);\n          setRouteOptions([]);\n        });\n    }, 500); // 500ms debounce\n\n    return () => clearTimeout(timer);\n  }, [startLocation, endLocation, routeMode, findLocationByName, userLocation]);\n\n  // Calculate and display the selected route\n  const calculateRoute = useCallback(() => {\n    if (selectedRouteId === null || !routeOptions.length) {\n      alert('Please select a route to start.');\n      return;\n    }\n\n    clearRoutes();\n\n    let startCoords;\n    if (startLocation) {\n      // If user entered a start location, use that\n      startCoords = findLocationByName(startLocation);\n    } else if (userLocation) {\n      // If no start location entered, use current user location\n      startCoords = userLocation;\n    } else {\n      alert('Unable to determine your current location. Please enter a start location.');\n      return;\n    }\n  \n    const endCoords = findLocationByName(endLocation);\n  \n    if (!startCoords || !endCoords) {\n      alert('Please enter valid locations');\n      return;\n    }\n  \n    // Convert coordinates to OpenLayers format\n    const startPoint = fromLonLat(startCoords);\n    const endPoint = fromLonLat(endCoords);\n  \n    // Create start marker (blue)\n    const startMarker = new Feature(new Point(startPoint));\n    startMarker.setStyle(\n      new Style({\n        image: new Icon({\n          src: 'https://cdn-icons-png.flaticon.com/128/7976/7976202.png',\n          scale: 0.2,\n          anchor: [0.5, 1],\n        }),\n      })\n    );\n    startMarker.set('type', 'marker');\n  \n    // Create end marker (red)\n    const endMarker = new Feature(new Point(endPoint));\n    endMarker.setStyle(\n      new Style({\n        image: new Icon({\n          src: 'https://cdn-icons-png.flaticon.com/128/9131/9131546.png',\n          scale: 0.2,\n          anchor: [0.5, 1],\n        }),\n      })\n    );\n    endMarker.set('type', 'marker');\n  \n    // Add markers to the vector source\n    vectorSourceRef.current.addFeature(startMarker);\n    vectorSourceRef.current.addFeature(endMarker);\n  \n    // Zoom to fit both markers\n    if (mapInstance.current) {\n      const extent = [\n        Math.min(startPoint[0], endPoint[0]), // Min Longitude\n        Math.min(startPoint[1], endPoint[1]), // Min Latitude\n        Math.max(startPoint[0], endPoint[0]), // Max Longitude\n        Math.max(startPoint[1], endPoint[1]), // Max Latitude\n      ];\n  \n      mapInstance.current.getView().fit(extent, {\n        padding: [50, 50, 50, 50],\n        duration: 1000,\n        maxZoom: 18,\n      });\n    }\n\n    // Display the selected route\n    const selectedRoute = routeOptions.find((route) => route.id === selectedRouteId);\n    if (selectedRoute) {\n      const routeFeature = new Feature({\n        geometry: new LineString(\n          selectedRoute.coordinates.map((coord: number[]) => fromLonLat(coord))\n        ),\n      });\n\n      routeFeature.setStyle(\n        new Style({\n          stroke: new Stroke({\n            color: routeMode === 'wheelchair' ? '#4287f5' : '#2563eb',\n            width: 4,\n            lineDash: routeMode === 'wheelchair' ? [5, 5] : undefined,\n          }),\n        })\n      );\n\n      vectorSourceRef.current.addFeature(routeFeature);\n\n      // Set turn-by-turn directions\n      if (selectedRoute.steps) {\n        const directions: TurnByTurnDirection[] = selectedRoute.steps.map((step: any) => ({\n          type: step.type,\n          instruction: step.instruction,\n          distance: step.distance,\n          duration: step.duration\n        }));\n        \n        setTurnByTurnDirections(directions);\n      }\n    }\n\n    // Close the flyout\n    setIsFlyoutOpen(false);\n  }, [startLocation, endLocation, selectedRouteId, routeOptions, clearRoutes, findLocationByName, userLocation, routeMode]);\n\n  // Handle changing locations\n  const handleStartLocationChange = useCallback((value: string) => {\n    setStartLocation(value);\n  }, []);\n\n  const handleEndLocationChange = useCallback((value: string) => {\n    setEndLocation(value);\n  }, []);\n\n  return (\n    <div className=\"map-wrapper\">\n      <div className=\"map-page\">\n        <div className=\"top-bar\">\n          <div className=\"search-container\">\n            <MapSearch \n              onStartChange={handleStartLocationChange}\n              onEndChange={handleEndLocationChange}\n              onSubmit={calculateRoute}\n              locations={campusLocations}\n            />\n            <div className=\"route-controls\">\n              <button \n                type=\"button\" \n                onClick={calculateRoute}\n                className=\"find-route-button\"\n                aria-label=\"Find route\"\n              >\n                GO\n              </button>\n              <button\n                type=\"button\"\n                onClick={toggleRouteMode}\n                className={`route-mode-toggle ${routeMode === 'wheelchair' ? 'wheelchair-active' : ''}`}\n                aria-label={`Switch to ${routeMode === 'wheelchair' ? 'standard walking' : 'wheelchair'} route`}\n              >\n                {routeMode === 'wheelchair' ? ' 🦽 Wheelchair' : ' 🚶 Walking'}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"map-content\">\n          {isFlyoutOpen && (\n            <div className=\"route-flyout\">\n              <h2>Route Options</h2>\n              {routeOptions.map((route) => (\n                <div\n                  key={route.id}\n                  className={`route-option ${selectedRouteId === route.id ? 'selected' : ''}`}\n                  onClick={() => setSelectedRouteId(route.id)}\n                >\n                  <h3>{route.summary}</h3>\n                  <p>Distance: {(route.distance / 1000).toFixed(2)} km</p>\n                  <p>Duration: {Math.round(route.duration / 60)} minutes</p>\n                </div>\n              ))}\n              <button \n                type=\"button\" \n                onClick={calculateRoute}\n                className=\"select-route-button\"\n                aria-label=\"Select this route\"\n              >\n                Use Selected Route\n              </button>\n            </div>\n          )}\n\n          <div className={`map-root ${className || ''} ${isFlyoutOpen ? 'shifted' : ''}`}>\n            <div \n              ref={mapRef} \n              className=\"map-container\" \n              role=\"application\"\n              aria-label=\"Interactive map displaying user location and navigation\"\n            />\n            <div className=\"map-controls\">\n              <button\n                type=\"button\"\n                onClick={toggleMapView}\n                className=\"map-toggle-button\"\n              >\n                {viewMode === 'standard' ? 'Satellite View' : 'Standard View'}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {turnByTurnDirections.length > 0 && (\n          <div className=\"turn-by-turn-directions\">\n            <h3>Turn-by-Turn Directions</h3>\n            <ul>\n              {turnByTurnDirections.map((direction, index) => (\n                <li key={index}>\n                  {direction.instruction} \n                  <span className=\"direction-details\">\n                    (Distance: {(direction.distance / 1).toFixed(1)} m, \n                    Duration: {(direction.duration / 60).toFixed(1)} min)\n                  </span>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AccessibleMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}